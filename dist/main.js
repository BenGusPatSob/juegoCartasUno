!function(a){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return a[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=a,t.c=e,t.d=function(a,e,r){t.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:r})},t.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},t.t=function(a,e){if(1&e&&(a=t(a)),8&e)return a;if(4&e&&"object"==typeof a&&a&&a.__esModule)return a;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var o in a)t.d(r,o,function(e){return a[e]}.bind(null,o));return r},t.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return t.d(e,"a",e),e},t.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},t.p="",t(t.s=0)}([function(a,e,t){"use strict";t.r(e);class r{constructor(a,e,t,r){this.codigo=e,this.color=a,this.esVisible=t,this.valor=r}get cod(){return this.codigo}get col(){return this.color}get isVisible(){return this.esVisible}get value(){return this.valor}set isVisible(a){this.esVisible=a}}class o{constructor(a,e=!1){this.cartas=a,this.visibles=e}}const s={barajando(){this.sort((a,e)=>.5-Math.random())}},l=new Map([["0",0],["1",1],["2",2],["3",3],["4",4],["5",5],["6",6],["7",7],["8",8],["9",9],["void",20],["plus2",20],["flip",20],["plus4",50],["swapCol",50]]),i=new Map([["0",["Red","Yellow","Green","Blue"]],["1",["Red","Yellow","Green","Blue","Red","Yellow","Green","Blue"]],["2",["Red","Yellow","Green","Blue","Red","Yellow","Green","Blue"]],["3",["Red","Yellow","Green","Blue","Red","Yellow","Green","Blue"]],["4",["Red","Yellow","Green","Blue","Red","Yellow","Green","Blue"]],["5",["Red","Yellow","Green","Blue","Red","Yellow","Green","Blue"]],["6",["Red","Yellow","Green","Blue","Red","Yellow","Green","Blue"]],["7",["Red","Yellow","Green","Blue","Red","Yellow","Green","Blue"]],["8",["Red","Yellow","Green","Blue","Red","Yellow","Green","Blue"]],["9",["Red","Yellow","Green","Blue","Red","Yellow","Green","Blue"]],["void",["Red","Yellow","Green","Blue","Red","Yellow","Green","Blue"]],["plus2",["Red","Yellow","Green","Blue","Red","Yellow","Green","Blue"]],["flip",["Red","Yellow","Green","Blue","Red","Yellow","Green","Blue"]],["plus4",["Multi","Multi","Multi","Multi"]],["swapCol",["Multi","Multi","Multi","Multi"]]]),c=new Map([["0",["Red","Yellow","Green","Blue"]],["1",["Red","Yellow","Green","Blue"]],["2",["Red","Yellow","Green","Blue"]],["3",["Red","Yellow","Green","Blue"]],["4",["Red","Yellow","Green","Blue"]],["5",["Red","Yellow","Green","Blue"]],["6",["Red","Yellow","Green","Blue"]],["7",["Red","Yellow","Green","Blue"]],["8",["Red","Yellow","Green","Blue"]],["9",["Red","Yellow","Green","Blue"]],["void",["Red","Yellow","Green","Blue"]],["plus2",["Red","Yellow","Green","Blue"]],["flip",["Red","Yellow","Green","Blue"]],["plus4",["Multi","Multi"]],["swapCol",["Multi","Multi"]]]),n=new Map([["0",["sameColor","sameCode","pick1","changeColor"]],["1",["sameColor","sameCode","pick1","changeColor"]],["2",["sameColor","sameCode","pick1","changeColor"]],["3",["sameColor","sameCode","pick1","changeColor"]],["4",["sameColor","sameCode","pick1","changeColor"]],["5",["sameColor","sameCode","pick1","changeColor"]],["6",["sameColor","sameCode","pick1","changeColor"]],["7",["sameColor","sameCode","pick1","changeColor"]],["8",["sameColor","sameCode","pick1","changeColor"]],["9",["sameColor","sameCode","pick1","changeColor"]],["void",["skip"]],["plus2",["pick2"]],["flip",["sameColor","changeColor","pick1"]],["plus4",["pick4","startDuel"]],["swapCol",["sameColor","pick1","changeColor"]]]),u=new Map([["0",[]],["1",[]],["2",[]],["3",[]],["4",[]],["5",[]],["6",[]],["7",[]],["8",[]],["9",[]],["void",["sameColor","sameCode","pick1","changeColor"]],["plus2",["sameColor","sameCode","pick1","changeColor"]],["flip",[]],["plus4",["pick6","skip"]],["swapCol",[]]]);class h extends o{constructor(a,e=!1,t=7){super(a,e),this.numeroMax=t,Object.assign(a.__proto__,s)}ordenaCartas(a){switch(a.toLowerCase()){case"porvalor":this.cartas.sort((a,e)=>e.value-a.value);break;case"porcolor":this.cartas=this.cartas.map(a=>a.col).sort();break;case"porcodigo":this.cartas=this.cartas.map(a=>a.cod).sort();break;case"aleatorio":this.cartas.barajando()}}filtraCartasPorColor(a){let e=[];return this.cartas.forEach((t,r)=>{t.col==a&&e.push(r)}),e}filtraCartasPorCodigo(a){let e=[];return this.cartas.forEach((t,r)=>{t.cod==a&&e.push(r)}),e}lanzaCartaPorPosicion(a){return this.cartas.splice(a,1)}lanzaCartaPorCodigo(a){return this.cartas.splice(this.cartas.indexOf(a),1)}lanzaCartaPorColor(a){return this.cartas.splice(this.cartas.indexOf(a),1)}cogeCarta(a){this.cartas.push(a),null==this.cartas[0]&&this.cartas.splice(0,1),this.escondeTodas()}cogeCartas(a){this.cartas.push(...a),null==this.cartas[0]&&this.cartas.splice(0,1),this.escondeTodas()}escondeTodas(){this.cartas.forEach(a=>{a.isVisible=this.visibles})}calculaValorEnMano(){let a=[];return this.cartas.map(e=>a.push(l.get(e.cod))),a}calculaOpciones(a,e=1){return 1?n.get(a.cod):u.get(a.cod)}filtraSegunCriterioCodCol(a,e){switch(e.toLowerCase()){case"samecode":return this.cartas.filter(e=>e.cod==a.cod);case"samecolor":return this.cartas.filter(e=>e.col==a.col);case"changecolor":return this.cartas.filter(a=>"swapCol"==a.cod);default:return null}}}class d{constructor(a,e,t=7,r=""){this.cartasDeLaMano=new h([],!1,t),this.personalidad=e,this.partida=a,this.nombre=r,this.valorTotalCartas=this.cartasDeLaMano.calculaValorEnMano(),this.tengoUna=this.cartasDeLaMano.cartas.length=1,this.unoDefensaActivo=!1}gritoUnoDefensa(){this.unoDefensaActivo=this.cartasDeLaMano.cartas.length=!0}gritoUnoAtaque(){this.partida.chequeaUnosDefensa()}cogeCarta(a){this.cartasDeLaMano.cogeCarta(a),this.tengoUna=!1,this.unoDefensaActivo=!1,this.cartasDeLaMano.calculaValorEnMano()}cogeCartas(a){this.cartasDeLaMano.cogeCartas(a),this.tengoUna=!1,this.unoDefensaActivo=!1,this.cartasDeLaMano.calculaValorEnMano()}eresFarolero(a){return null==this.cartasDeLaMano.find(e=>e.col==a.col)}lanzaOCogeCarta(a,e=this.partida.round){let t=null,r=null,o=this.cartasDeLaMano.calculaOpciones(a,e);if(o.length>0){switch(o[Math.floor(Math.random()*o.length)].toLowerCase()){case"samecode":t=this.cartasDeLaMano.filtraSegunCriterioCodCol(a,"sameCode");break;case"samecolor":t=this.cartasDeLaMano.filtraSegunCriterioCodCol(a,"sameColor");break;case"changecolor":t=this.cartasDeLaMano.filtraSegunCriterioCodCol(a,"changeColor");break;case"skip":t=[],this.partida.avanzaJugadorActivo(),this.partida.jugadores[this.partida.jugadorActivo].lanzaOCogeCarta(a,2);break;case"pick1":t=[],this.cartasDeLaMano.cogeCarta(this.partida.MazoRobo.robaCarta()),this.partida.avanzaJugadorActivo();break;case"pick2":t=[],this.cartasDeLaMano.cogeCartas(this.partida.MazoRobo.reparteCartas(2)),this.partida.avanzaJugadorActivo(),this.partida.jugadores[this.partida.jugadorActivo].lanzaOCogeCarta(a,2);break;case"pick4":t=[],this.cartasDeLaMano.cogeCartas(this.partida.MazoRobo.reparteCartas(4)),this.partida.avanzaJugadorActivo(),this.partida.jugadores[this.partida.jugadorActivo].lanzaOCogeCarta(a,2);break;case"startduel":0==this.partida.jugadores[this.partida.getDesafiante()].eresFarolero(a)?this.cartasDeLaMano.cogeCartas(this.partida.MazoRobo.reparteCartas(6)):this.partida.jugadores[this.partida.getDesafiante()].cartasDeLaMano.cogeCartas(this.partida.MazoRobo.reparteCartas(6));t=[]}r=t.length>0?t[Math.floor(Math.random()*t.length)]:null,null!=r&&(this.cartasDeLaMano.cartas.splice(this.cartasDeLaMano.cartas.findIndex(a=>a===r),1),this.cartasDeLaMano.calculaValorEnMano(),this.partida.MazoDescartes.addDescarte(r))}return 0==this.cartasDeLaMano.cartas.length&&this.partida.declaraGanador(this),r}actualizaValorTotalAcumulado(){return this.cartasDeLaMano.calculaValorEnMano()}}class g extends o{constructor(a,e=!0){super(a,e)}addDescarte(a){this.cartas.push(a),this.cartas[this.cartas.length-1].isVisible=!0}muestraTodas(){this.cartas.forEach(a=>{a.isVisible=this.visibles})}get colVisible(){return this.cartas[this.cartas.length-1].col}get codVisible(){return this.cartas[this.cartas.length-1].cod}}class p extends o{constructor(a,e=!1){super(a,e),Object.assign(a.__proto__,s)}baraja(){this.cartas.barajando()}robaCarta(){return this.reparteCartas(1)}reparteCarta(){return this.reparteCartas(1)}addCartasAlMazo(a){this.cartas.push(...a),this.escondeTodas()}escondeTodas(){this.cartas.forEach(a=>{a.isVisible=this.visibles})}reparteCartas(a){let e=[],t=Math.min(a,this.cartas.length);for(let a=0;a<t;a++)e.push(this.cartas.pop());return e}}class C{creaBaraja(a){return new o(f(a))}}let f=a=>{let e=[];switch(a.toLowerCase()){case"mini":for(let a of c.keys()){let t=c.get(a);for(let o=0;o<t.length;o++)e.push(new r(t[o],a,!1,l.get(a)))}return e;case"normal":for(let a of i.keys()){let t=i.get(a);for(let o=0;o<t.length;o++)e.push(new r(t[o],a,!1,l.get(a)))}return e}};let M=new class{constructor(a,e,t){{this.jugadores=e,this.numCartasInicial=t;let r=new C;this.MazoRobo=new p(r.creaBaraja(a).cartas),this.MazoRobo.baraja(),this.MazoDescartes=new g([],!0),this.MazoDescartes.addDescarte(this.MazoRobo.robaCarta()),this.cartaVisible=null,this.round=1,this.ganador=null,this.finalizada=!1,this.jugadorActivo=0}}incluyeJugadores(a){this.jugadores.push(...a)}set actualizaCartaVisible(a){this.cartaVisible=a}get muestraCartaVisible(){return this.cartaVisible}chequeaUnosDefensa(){this.jugadores.map(a=>a.cartasDeLaMano.cartas.length=a)}desconectaUnosDefensa(){this.jugadores.map(a=>a.unoDefensaActivo=!1)}declaraGanador(a){this.ganador=a,this.finalizada=!0,this.calculaClasificacion()}calculaClasificacion(){this.ganador||this.jugadores.forEach(a=>a.actualizaValorTotalAcumulado()).sort((a,e)=>a.valorTotalCartas-e.valorTotalCartas)}reparteCartas(){for(let a=0;a<this.numCartasInicial;a++)this.jugadores.forEach(a=>{a.cartasDeLaMano.cogeCarta(this.MazoRobo.reparteCartas(1)[0])});this.jugadores.forEach(a=>a.cartasDeLaMano.escondeTodas())}getJugadorActivo(){return this.jugadores[this.jugadorActivo]}avanzaJugadorActivo(){this.jugadorActivo=this.jugadorActivo+1==this.jugadores.length?0:this.jugadorActivo+1}getDesafiante(){this.jugadorActivo-1<0?this.jugadores.length:this.jugadorActivo}changeDirection(){this.jugadores.reverse(),this.jugadorActivo=this.jugadores.length-this.jugadorActivo}}("Normal",[],7),w=[],b=["tranquilo_calculador","mentiroso_despistado","agresivo_centrado","desconocida"];for(let a=0;a<4;a++)w.push(new d(M,b[a],7));M.incluyeJugadores(w),M.reparteCartas();do{M.jugadores[M.jugadorActivo].lanzaOCogeCarta(M.MazoDescartes.cartas[M.MazoDescartes.cartas.length-1][0])}while(null==M.ganador)}]);